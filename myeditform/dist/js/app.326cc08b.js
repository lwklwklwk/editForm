(function(e){function t(t){for(var n,l,s=t[0],d=t[1],r=t[2],u=0,b=[];u<s.length;u++)l=s[u],i[l]&&b.push(i[l][0]),i[l]=0;for(n in d)Object.prototype.hasOwnProperty.call(d,n)&&(e[n]=d[n]);c&&c(t);while(b.length)b.shift()();return o.push.apply(o,r||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,s=1;s<a.length;s++){var d=a[s];0!==i[d]&&(n=!1)}n&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},o=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=t,s=s.slice();for(var r=0;r<s.length;r++)t(s[r]);var c=d;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"12d5":function(e,t,a){"use strict";var n=a("a10a"),i=a.n(n);i.a},"2f7d":function(e,t,a){},"425e":function(e,t,a){"use strict";var n=a("7d45"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"card",editable:""},on:{edit:e.handleTabsEdit},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.editableTabs,function(e){return a("el-tab-pane",{key:e.name,attrs:{label:e.title,name:e.name}},[a("EditTable")],1)}),1)],1)},o=[],l=(a("7514"),a("7f7f"),a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.ifLogin?a("div",[a("el-table",{attrs:{data:e.tableData}},[e._l(e.tableHead,function(t){return a("el-table-column",{key:t.prop,attrs:{prop:t.prop,label:t.label},scopedSlots:e._u([{key:"header",fn:function(t){return[a("div",{staticClass:"head-box"},[a("span",[e._v(e._s(t.column.label))]),a("el-button",{staticClass:"delete-head",staticStyle:{"margin-left":"20px"},attrs:{size:"mini",type:"danger",icon:"el-icon-close",circle:""},on:{click:function(a){return e.deleteHead(t.$index)}}})],1),e.showHeadEdit&&e.editTableHead[t.$index]?a("el-input",{attrs:{type:"text"},model:{value:e.editTableHead[t.$index]["label"],callback:function(a){e.$set(e.editTableHead[t.$index],"label",a)},expression:"editTableHead[scope.$index]['label']"}}):e._e()]}},{key:"default",fn:function(n){return[a("p",[e._v(e._s(n.row[t.prop]))]),void 0!=e.showEdit[n.$index]&&e.showEdit[n.$index]?a("el-input",{attrs:{type:"text"},model:{value:e.editTableData[n.$index][t.prop],callback:function(a){e.$set(e.editTableData[n.$index],t.prop,a)},expression:"editTableData[scope.$index][item.prop]"}}):e._e()]}}],null,!0)})}),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("Edit")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("Delete")]),void 0!=e.showEdit[t.$index]&&e.showEdit[t.$index]?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.completeEdit(t.$index,t.row)}}},[e._v("完成")]):e._e(),void 0!=e.showEdit[t.$index]&&e.showEdit[t.$index]?a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.cancelEdit(t.$index,t.row)}}},[e._v("取消")]):e._e()]}}])},[a("template",{slot:"header"},[a("el-button",{on:{click:e.editHead}},[e._v("编辑表头")]),a("el-button",{attrs:{disabled:e.showHeadEdit},on:{click:e.addHead}},[e._v("添加表头")]),e.showHeadEdit?a("el-button",{on:{click:e.completeEditHead}},[e._v("完成")]):e._e(),e.showHeadEdit?a("el-button",{on:{click:e.cancelHeadEdit}},[e._v("取消")]):e._e()],1)],2)],2),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:e.addRow}})],1):a("div",{staticClass:"login-box",attrs:{value:"first"}},[a("el-tabs",{model:{value:e.tabsChoose,callback:function(t){e.tabsChoose=t},expression:"tabsChoose"}},[a("el-tab-pane",{staticClass:"container",attrs:{label:"新建表格",name:"first"}},[a("div",{staticStyle:{"margin-top":"10vh"}},[a("span",[e._v("新建表格名字:")]),a("el-input",{model:{value:e.newTabName,callback:function(t){e.newTabName=t},expression:"newTabName"}})],1),a("el-button",{staticStyle:{"margin-top":"5vh"},on:{click:e.createTabName}},[e._v("新建")])],1),a("el-tab-pane",{staticClass:"container",attrs:{label:"连接至已有表格",name:"second"}},[a("div",{staticStyle:{"margin-top":"10vh"}},[a("span",[e._v("待连接表格名字:")]),a("el-input",{model:{value:e.linkTabName,callback:function(t){e.linkTabName=t},expression:"linkTabName"}})],1),a("el-button",{staticStyle:{"margin-top":"5vh"},on:{click:e.linkTab}},[e._v("连接")])],1),a("el-tab-pane",{staticClass:"container",attrs:{label:"离线模式",name:"third"}},[a("el-button",{staticStyle:{"margin-top":"5vh"},on:{click:e.localMode}},[e._v("使用离线模式")])],1)],1)],1)])}),s=[],d=(a("6b54"),{name:"EditTable",data:function(){return{file:"",tabsChoose:"first",tableHead:[],tableData:[],editTableData:[],editTableHead:[],count:1,mode:"local",showEdit:[],showHeadEdit:!1,ifLogin:!1,newTabName:"",linkTabName:""}},computed:{},watch:{tableHead:{handler:function(e){},deep:!0}},created:function(){},methods:{localMode:function(){this.mode="local",this.ifLogin=!0},addHead:function(){"online"!=this.mode?(this.count++,this.tableHead.push({prop:this.count.toString(),label:"新建列"})):this.socket.emit("addHead")},deleteHead:function(e){if("online"!=this.mode){var t=this.tableHead[e].prop;console.log(t),this.tableData.forEach(function(e){delete e[t]}),console.log(this.tableData),this.tableHead.splice(e,1)}else this.socket.emit("deleteHead",e)},editHead:function(){this.showHeadEdit=!0,this.editTableHead=JSON.parse(JSON.stringify(this.tableHead))},cancelHeadEdit:function(){this.showHeadEdit=!1},completeEditHead:function(){"online"!=this.mode?(this.tableHead=JSON.parse(JSON.stringify(this.editTableHead)),this.showHeadEdit=!1):(this.socket.emit("editHead",JSON.parse(JSON.stringify(this.editTableHead))),this.showHeadEdit=!1)},addRow:function(){"online"!=this.mode?this.tableData.push({}):this.socket.emit("addRow")},completeEdit:function(e,t){"online"!=this.mode?(console.log("此行修改",this.editTableData[e]),this.tableData[e]=this.editTableData[e]):this.socket.emit("editRow",{index:e,data:this.editTableData[e]}),this.$set(this.showEdit,e,!1)},cancelEdit:function(e){this.$set(this.showEdit,e,!1)},handleEdit:function(e,t){this.$set(this.showEdit,e,!0),this.editTableData=JSON.parse(JSON.stringify(this.tableData))},handleDelete:function(e,t){"online"!=this.mode?(this.tableData.splice(e,1),this.$set(this.showEdit,e,!0)):this.socket.emit("deleteRow",e)},createTabName:function(){var e=this;this.$axios.get("/setTabName",{params:{newTabName:e.newTabName}}).then(function(t){console.log(t),e.$message({showClose:!0,message:t.info,type:"success"})}).catch(function(e){console.log(e)})},linkTab:function(){var e=this;this.$axios.get("/linkTab",{params:{linkTabName:e.linkTabName}}).then(function(t){console.log(t),e.$message({showClose:!0,message:t.info,type:"success"}),e.mode="online",e.metaToData(t.tableMeta),e.socket=io("http://119.23.105.188:3000"),e.socket.emit("setGroup",e.linkTabName),e.socket.on("tableData",function(t){e.metaToData(t),console.log("收到表格信息",t)}),e.$parent.$parent.$parent.changeName(e.linkTabName),e.socket.on("test",function(e){}),e.ifLogin=!0}).catch(function(e){console.log(e)})},metaToData:function(e){this.tableHead=e.tableHead,this.tableData=e.tableData}}}),r=d,c=(a("12d5"),a("2877")),u=Object(c["a"])(r,l,s,!1,null,"1863e864",null),b=u.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"data-out",on:{click:function(t){return e.dataOut()}}},[e._v("导出")]),a("input",{attrs:{type:"file"},on:{change:function(t){return e.dataIn(t)}}})])},h=[],p=(a("28a5"),{name:"FsData",props:{tableHead:{},tableData:{}},mounted:function(){},methods:{dataOut:function(){for(var e="",t=0,a=this.tableHead.length;t<a;t++)e+=this.tableHead[t],e+=t!=a-1?",":"\n";for(var n="",i=0,o=this.tableData.length;i<o;i++)for(var l=0,s=this.tableData[i].length;l<s;l++)n=n+this.tableData[i][l]+(l==s-1?"\n":",");console.log(e+n);var d=e+n,r=new Blob(["\ufeff"+d],{type:"text/csv;charset=gb2312;",endings:"native"}),c=document.createElement("a");c.download="text.csv",c.href=URL.createObjectURL(r),c.click()},dataIn:function(e){var t=this;if(e.target.files[0]){var a=e.target.files[0],n=new FileReader;n.readAsText(a,"gb2312"),n.onload=function(e){console.log(e.target.result);var a=e.target.result;a=a.split("\n").filter(function(e){return""!=e}),t.$emit("update:tableHead",a[0].split(",")),a.shift(),a=a.map(function(e){return e.split(",")}),t.$emit("update:tableData",a)}}}}}),m=p,v=(a("425e"),Object(c["a"])(m,f,h,!1,null,"41ed42e8",null)),g=v.exports,T=a("5c96"),w=a.n(T);a("0fae");n["default"].use(w.a);var k={components:{EditTable:b,FsData:g},data:function(){return{editableTabsValue:"1",editableTabs:[{title:"New Tab",name:"1"}],tabIndex:1}},created:function(){},methods:{handleTabsEdit:function(e,t){if("add"===t){var a=++this.tabIndex+"";this.editableTabs.push({title:"New Tab",name:a}),this.editableTabsValue=a}if("remove"===t){var n=this.editableTabs,i=this.editableTabsValue;i===e&&n.forEach(function(t,a){if(t.name===e){var o=n[a+1]||n[a-1];o&&(i=o.name)}}),this.editableTabsValue=i,this.editableTabs=n.filter(function(t){return t.name!==e})}},changeName:function(e){var t=this;this.editableTabs.find(function(e){return e.name==t.editableTabsValue}).title=e}}},x=k,y=(a("becd"),Object(c["a"])(x,i,o,!1,null,"072ede51",null)),H=y.exports,E=a("bc3a"),$=a.n(E),_=$.a.create({baseURL:"http://119.23.105.188:3000",timeout:5e3});_.interceptors.response.use(function(e){if(0===e.data.status)return e.data;throw N.$message({showClose:!0,message:e.data.info,type:"error"}),e.data.info},function(e){return N.$message({showClose:!0,message:"网络出现问题",type:"error"}),Promise.reject(e)});var D=_;n["default"].config.productionTip=!1,n["default"].prototype.$axios=D;var N=t["default"]=new n["default"]({render:function(e){return e(H)}}).$mount("#app")},"7d45":function(e,t,a){},a10a:function(e,t,a){},becd:function(e,t,a){"use strict";var n=a("2f7d"),i=a.n(n);i.a}});
//# sourceMappingURL=app.326cc08b.js.map